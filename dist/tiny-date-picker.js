!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TinyDatePicker=t():e.TinyDatePicker=t()}(this,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";function a(e,t,n){void 0===n&&(n=!1);var a=(e=new Date(e)).getDate(),r=e.getMonth()+t;return e.setDate(1),e.setMonth(n?(12+r)%12:r),e.setDate(a),e.getDate()<a&&e.setDate(0),e}Object.defineProperty(t,"__esModule",{value:!0}),t.constrainDate=t.dateOrParse=t.setMonth=t.setYear=t.shiftYear=t.shiftMonth=t.shiftDay=t.datesEq=t.now=void 0,t.now=function(){var e=new Date;return e.setHours(0,0,0,0),e},t.datesEq=function(e,t){return(e&&e.toDateString())===(t&&t.toDateString())},t.shiftDay=function(e,t){return(e=new Date(e)).setDate(e.getDate()+t),e},t.shiftMonth=a,t.shiftYear=function(e,t){return(e=new Date(e)).setFullYear(e.getFullYear()+t),e},t.setYear=function(e,t){return(e=new Date(e)).setFullYear(t),e},t.setMonth=function(e,t){return a(e,t-e.getMonth())},t.dateOrParse=function(e){return function(t){return function(e){return(e=new Date(e)).setHours(0,0,0,0),e}("string"==typeof t?e(t):t)}},t.constrainDate=function(e,t,n){return e<t?t:e>n?n:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cp=t.noop=t.bufferFn=void 0,t.bufferFn=function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}},t.noop=function(){},t.cp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],a=1;a<e.length;++a){var r=e[a]||{};for(var o in r)n[o]=r[o]}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=t.Key=void 0,t.Key={left:37,up:38,right:39,down:40,enter:13,esc:27},t.on=function(e,t,n){return t.addEventListener(e,n,!0),function(){t.removeEventListener(e,n,!0)}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),o=a(n(11)),i=a(n(12)),u=n(1),s=n(2),c=n(0),d={day:r.default,year:i.default,month:o.default};function l(e){var t=e.el.querySelector(".dp-current");return t&&t.focus()}!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}(),t.default=function(e,t,n){var a,r,o=!1,i={el:void 0,opts:n,shouldFocusOnBlur:!0,shouldFocusOnRender:!0,state:{get selectedDate(){return r},set selectedDate(e){e&&!n.inRange(e)||(e?(r=new Date(e),i.state.highlightedDate=r):r=e,i.updateInput(r),t("select"),i.close())},view:"day"},adjustPosition:u.noop,containerHTML:'<div class="dp"></div>',attachToDom:function(){n.appendTo.appendChild(i.el)},updateInput:function(t){var a=new CustomEvent("change",{bubbles:!0});e.value=t?n.format(t):"",e.dispatchEvent(a)},computeSelectedDate:function(){return n.parse(e.value)},currentView:function(){return d[i.state.view]},open:function(){o||(i.el||(i.el=function(e,t){var n=document.createElement("div");return n.className=e.mode,n.innerHTML=t,n}(n,i.containerHTML),function(e){var t=e.el,n=t.querySelector(".dp");function a(t){t&&t.target.className.split(" ").forEach((function(n){var a=e.currentView().onClick[n];a&&a(t,e)}))}t.ontouchstart=u.noop,s.on("blur",n,u.bufferFn(150,(function(){e.hasFocus()||e.close(!0)}))),s.on("keydown",t,(function(t){var n=t;(n.code||n.keyCode)===s.Key.enter?a(n):e.currentView().onKeyDown(n,e)})),s.on("mousedown",n,(function(t){document.activeElement!==t.target&&(t.preventDefault(),l(e))})),s.on("click",t,a)}(i)),r=c.constrainDate(i.computeSelectedDate(),n.min,n.max),i.state.highlightedDate=r||n.highlightedDate,i.state.view="day",i.attachToDom(),i.render(),t("open"))},isVisible:function(){return!!i.el&&!!i.el.parentNode},hasFocus:function(){var e=document.activeElement;return i.el&&i.el.contains(e)&&e.className.indexOf("dp-focuser")<0},shouldHide:function(){return i.isVisible()},close:function(n){var a=i.el;if(i.isVisible()){if(a){var r=a.parentNode;r&&r.removeChild(a)}o=!0,n&&i.shouldFocusOnBlur&&function(e){e.focus(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.blur()}(e),setTimeout((function(){o=!1}),100),t("close")}},destroy:function(){i.close(),a()},render:function(){if(i.el){var e=i.hasFocus(),t=i.currentView().render(i);t&&(i.el.firstChild.innerHTML=t),i.adjustPosition(),(e||i.shouldFocusOnRender)&&l(i)}},setState:function(e){for(var n in e)i.state[n]=e[n];t("statechange"),i.render()}};return a=function(e,t){var n=u.bufferFn(5,(function(){t.shouldHide()?t.close():t.open()})),a=[s.on("blur",e,u.bufferFn(150,(function(){t.hasFocus()||t.close(!0)}))),s.on("mousedown",e,(function(){e===document.activeElement&&n()})),s.on("focus",e,n),s.on("input",e,(function(e){if(e&&e.target){var n=e.target,a=t.opts.parse(n.value);isNaN(a.valueOf())||t.setState({highlightedDate:a})}}))];return function(){a.forEach((function(e){e()}))}}(e,i),i}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DatePicker=void 0;var r=n(7),o=a(n(8)),i=a(n(5));t.DatePicker=function(e,t){var n=i.default(),a=r.DatePickerOptions(t),u=o.default(e,(function(e){n.emit(e,s)}),a),s={get state(){return u.state},on:n.on,off:n.off,setState:u.setState,open:u.open,close:u.close,destroy:u.destroy};return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={};function t(t,n){(e[t]=e[t]||[]).push(n)}return{on:function(e,n){return n?t(e,n):function(e){for(var n in e)t(n,e[n])}(e),this},emit:function(t,n){(e[t]||[]).forEach((function(e){e(t,n)}))},off:function(t,n){return t?e[t]=n?(e[t]||[]).filter((function(e){return e!==n})):[]:e={},this}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateRangePicker=t.DatePicker=void 0;var a=n(4);Object.defineProperty(t,"DatePicker",{enumerable:!0,get:function(){return a.DatePicker}});var r=n(15);Object.defineProperty(t,"DateRangePicker",{enumerable:!0,get:function(){return r.DateRangePicker}}),n(16),n(17)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatePickerOptions=void 0;var a=n(0),r=n(1),o={days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"};t.DatePickerOptions=function(e){void 0===e&&(e={});var t,n,i=r.cp({lang:o,mode:"dp-modal",highlightedDate:a.now(),format:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:function(e){var t=new Date(e);return isNaN(t.valueOf())?a.now():t},dateClass:function(e){return""},inRange:function(){return!0},appendTo:document.body,alignment:"left"},e),u=a.dateOrParse(i.parse);return i.lang=r.cp(o,i.lang),i.parse=u,i.inRange=(n=(t=i).inRange,function(e,a){var r=!t.min||t.min<=e,o=!t.max||t.max>=e;return n(e,a)&&r&&o}),i.min=u(i.min||a.shiftYear(a.now(),-100)),i.max=u(i.max||a.shiftYear(a.now(),100)),i.highlightedDate=i.parse(i.highlightedDate),i.alignment=i.alignment||"left",i}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(9)),o=a(n(13)),i=a(n(14));t.default=function(e,t,n){var a=e instanceof HTMLElement?e:document.querySelector(e);if(!a)throw new Error("The provided input '"+e+"' could not be found.");switch(n.mode){case"dp-modal":return r.default(a,t,n);case"dp-below":return o.default(a,t,n);case"dp-permanent":return i.default(a,t,n);default:throw new Error("Unknown mode: '"+n.mode)}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3));t.default=function(e,t,n){var a=r.default(e,t,n);return e.readOnly=!0,a.containerHTML+='<a href="#" class="dp-focuser">.</a>',a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(0);t.default={onKeyDown:function(e,t){var n=e.code||e.keyCode,o=n===a.Key.left?-1:n===a.Key.right?1:n===a.Key.up?-7:n===a.Key.down?7:0;n===a.Key.esc?t.close():o&&(e.preventDefault(),t.setState({highlightedDate:r.shiftDay(t.state.highlightedDate,o)}))},onClick:{"dp-day":function(e,t){if(console.log(e),!e.target)return void console.log("no target");console.log(e);var n=e.target;console.log(n),console.log("here"),t.setState({selectedDate:new Date(parseInt(n.getAttribute("data-date")))})},"dp-next":function(e,t){var n=t.state.highlightedDate;t.setState({highlightedDate:r.shiftMonth(n,1)})},"dp-prev":function(e,t){var n=t.state.highlightedDate;t.setState({highlightedDate:r.shiftMonth(n,-1)})},"dp-today":function(e,t){t.setState({selectedDate:r.now()})},"dp-clear":function(e,t){t.setState({selectedDate:null})},"dp-close":function(e,t){t.close()},"dp-cal-month":function(e,t){t.setState({view:"month"})},"dp-cal-year":function(e,t){t.setState({view:"year"})}},render:function(e){var t=e.opts,n=t.lang,a=e.state,o=n.days,i=t.dayOffset||0,u=a.selectedDate,s=a.highlightedDate,c=s.getMonth(),d=r.now().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><button tabindex="-1" type="button" class="dp-prev">Prev</button><button tabindex="-1" type="button" class="dp-cal-month">'+n.months[c]+'</button><button tabindex="-1" type="button" class="dp-cal-year">'+s.getFullYear()+'</button><button tabindex="-1" type="button" class="dp-next">Next</button></header><div class="dp-days">'+o.map((function(e,t){return'<span class="dp-col-header">'+o[(t+i)%o.length]+"</span>"})).join("")+function(e,t,n){var a="",r=new Date(e);r.setDate(1),r.setDate(1-r.getDay()+t),t&&r.getDate()===t+1&&r.setDate(t-6);for(var o=0;o<42;++o)a+=n(r),r.setDate(r.getDate()+1);return a}(s,i,(function(e){var n=e.getMonth()!==c,a=!t.inRange(e),o=e.getTime()===d,i="dp-day";return i+=n?" dp-edge-day":"",i+=r.datesEq(e,s)?" dp-current":"",i+=r.datesEq(e,u)?" dp-selected":"",i+=a?" dp-day-disabled":"",i+=o?" dp-day-today":"",'<button tabindex="-1" type="button" class="'+(i+=" "+t.dateClass(e))+'" data-date="'+e.getTime()+'">'+e.getDate()+"</button>"}))+'</div><footer class="dp-cal-footer"><button tabindex="-1" type="button" class="dp-today">'+n.today+'</button><button tabindex="-1" type="button" class="dp-clear">'+n.clear+'</button><button tabindex="-1" type="button" class="dp-close">'+n.close+"</button></footer></div>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(0);t.default={onKeyDown:function(e,t){var n=e.code||e.keyCode,o=n===a.Key.left?-1:n===a.Key.right?1:n===a.Key.up?-3:n===a.Key.down?3:0;n===a.Key.esc?t.setState({view:"day"}):o&&(e.preventDefault(),t.setState({highlightedDate:r.shiftMonth(t.state.highlightedDate,o,!0)}))},onClick:{"dp-month":function(e,t){t.setState({highlightedDate:r.setMonth(t.state.highlightedDate,parseInt(e.target.getAttribute("data-month"))),view:"day"})}},render:function(e){var t=e.opts.lang.months,n=e.state.highlightedDate.getMonth();return'<div class="dp-months">'+t.map((function(e,t){var a="dp-month";return'<button tabindex="-1" type="button" class="'+(a+=n===t?" dp-current":"")+'" data-month="'+t+'">'+e+"</button>"})).join("")+"</div>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(0);t.default={render:function(e){var t=e.state,n=t.highlightedDate.getFullYear(),a=t.selectedDate.getFullYear();return'<div class="dp-years">'+function(e,t){for(var n="",a=e.opts.max.getFullYear();a>=e.opts.min.getFullYear();--a)n+=t(a);return n}(e,(function(e){var t="dp-year";return t+=e===n?" dp-current":"",'<button tabindex="-1" type="button" class="'+(t+=e===a?" dp-selected":"")+'" data-year="'+e+'">'+e+"</button>"}))+"</div>"},onKeyDown:function(e,t){var n=e.code||e.keyCode,o=t.opts,i=n===a.Key.left||n===a.Key.up?1:n===a.Key.right||n===a.Key.down?-1:0;if(n===a.Key.esc)t.setState({view:"day"});else if(i){e.preventDefault();var u=r.shiftYear(t.state.highlightedDate,i);t.setState({highlightedDate:r.constrainDate(u,o.min,o.max)})}},onClick:{"dp-year":function(e,t){t.setState({highlightedDate:r.setYear(t.state.highlightedDate,parseInt(e.target.getAttribute("data-year"))),view:"day"})}}}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(3));t.default=function(e,t,n){var a=r.default(e,t,n);return a.shouldFocusOnBlur=!1,Object.defineProperty(a,"shouldFocusOnRender",{get:function(){return e!==document.activeElement}}),a.adjustPosition=function(){!function(e,t,n){var a=e.getBoundingClientRect(),r=window;(function(e,t,n){var a=e.el,r=n.pageYOffset,o=r+t.top,i=a.offsetHeight,u=o+t.height+8,s=o-i-8,c=s>0&&u+i>r+n.innerHeight,d=c?s:u;a.classList&&(a.classList.toggle("dp-is-above",c),a.classList.toggle("dp-is-below",!c));a.style.top=d+"px"})(t,a,r),function(e,t,n,a){var r=e.el,o=n.pageXOffset,i=t.left+o,u=n.innerWidth+o,s=r.offsetWidth,c=u-s,d=i+s>u&&c>0?c:i;r.style.left="right"===a?d+(t.width-s)+"px":d+"px"}(t,a,r,n),t.el.style.visibility=""}(e,a,n.alignment)},a}},function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=a(n(3));t.default=function(e,t,n){var a=o.default(e,t,n);return a.close=r.noop,a.updateInput=r.noop,a.shouldFocusOnRender=n.shouldFocusOnRender||!1,a.computeSelectedDate=function(){return n.highlightedDate||new Date},a.attachToDom=function(){a.el&&e.appendChild(a.el)},a.open(),a}},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DateRangePicker=void 0;var o=n(4),i=r(n(5)),u=n(0),s=n(1);function c(e){return 12*e.getFullYear()+e.getMonth()}t.DateRangePicker=function(e,t){t=t||{};var n,r=i.default(),d=function(e){if("string"==typeof e){var t=document.querySelector(e);if(!t)throw new Error("Could not find container: '"+e+"'");e=t}return e.innerHTML='<div class="dr-cals"><div class="dr-cal-start"></div><div class="dr-cal-end"></div></div>',e.querySelector(".dr-cals")}(e),l={start:void 0,end:void 0},f=d.querySelector(".dr-cal-start"),h=d.querySelector(".dr-cal-end");if(!f)throw new Error("Could not find DateRangePicker startElement: '"+f);if(!h)throw new Error("Could not find DateRangePicker endElement: '"+h);var p=o.DatePicker(f,s.cp({},t.startOpts,{mode:"dp-permanent",dateClass:w})),g=o.DatePicker(h,s.cp({},t.endOpts,{mode:"dp-permanent",highlightedDate:u.shiftMonth(p.state.highlightedDate,1),dateClass:w})),v={state:l,setState:b,on:r.on,off:r.off};function y(e,t){1!==function(e,t){return c(t)-c(e)}(p.state.highlightedDate,g.state.highlightedDate)&&(t===p?g.setState({highlightedDate:u.shiftMonth(t.state.highlightedDate,1)}):p.setState({highlightedDate:u.shiftMonth(t.state.highlightedDate,-1)}))}function D(e,t){var n=t.state.selectedDate;!l.start||l.end?b({start:n,end:void 0}):b({start:n>l.start?l.start:n,end:n>l.start?n:l.start})}function b(e){l=a({},e),r.emit("statechange",v),m()}function m(){p.setState({}),g.setState({})}function w(e){return((l.end||n)&&l.start&&function(e,t,n){return e<n&&e>=t||e<=t&&e>n}(e,l.end||n,l.start)?"dr-in-range ":"")+(u.datesEq(e,l.start)||u.datesEq(e,l.end)?"dr-selected ":"")}return p.on("statechange",y),p.on("select",D),g.on("statechange",y),g.on("select",D),/iPhone|iPad|iPod/i.test(navigator.userAgent)||d.addEventListener("mouseover",(function(e){if(e&&e.target){var t=e.target;if(t.classList.contains("dp-day")){var a=new Date(parseInt(t.dataset.date));!u.datesEq(a,n)&&(n=a,m())}}})),v}},function(e,t,n){},function(e,t,n){}])}));